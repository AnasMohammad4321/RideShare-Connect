// web3.min.js
document.addEventListener('DOMContentLoaded', function () {
    initWeb3();
    // Commenting out loadRides() as it needs to be defined
    // loadRides();
});

async function initWeb3() {
    if (window.ethereum) {
        window.web3 = new Web3(window.ethereum);
        try {
            // Request account access using eth_requestAccounts
            await window.ethereum.request({ method: 'eth_requestAccounts' });
        } catch (error) {
            console.error('User denied account access:', error);
        }
    } else if (window.web3) {
        // Legacy dapp browsers
        window.web3 = new Web3(window.web3.currentProvider);
    } else {
        // Non-dapp browsers
        console.error('No web3 provider detected');
    }
}

async function signup(userType) {
    if (userType === 'customer') {
        await signupCustomer();
    } else if (userType === 'driver') {
        await signupDriver();
    }
}

async function login() {
    await signin();
}
